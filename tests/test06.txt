company-home listen

[janson@janson koolnet]$  ./ctest -password="janson" -user="janson"
2015/12/21 10:47:50 Got clientId: 109 IP 116.30.171.74
2015/12/21 10:47:50 starting
2015/12/21 10:47:50 init pong 116.30.171.74:56551
2015/12/21 10:47:50 resetLocalAddrs: [172.17.42.1:56551 10.1.1.98:56551 116.30.171.74:56551]
2015/12/21 10:47:50 Request from myself
2015/12/21 10:47:50 resetLocalAddrs: [172.17.42.1:56551 10.1.1.98:56551 116.30.171.74:56551]
2015/12/21 10:47:50 got from myself [172.17.42.1:56551 10.1.1.98:56551 116.30.171.74:56551] [192.168.1.23:43015 172.17.42.1:43015 183.16.171.56:43015]
2015/12/21 10:47:50 shakeOne To 192.168.1.23:43015
2015/12/21 10:47:50 shakeOne To 172.17.42.1:43015
2015/12/21 10:47:50 shakeOne To 183.16.171.56:43015
2015/12/21 10:47:50 shakeOne To 192.168.1.23:43015
2015/12/21 10:47:50 shakeOne To 172.17.42.1:43015
2015/12/21 10:47:50 shakeOne To 183.16.171.56:43015
2015/12/21 10:47:50 shakeOne To 192.168.1.23:43015
2015/12/21 10:47:50 shakeOne To 172.17.42.1:43015
2015/12/21 10:47:50 shakeOne To 183.16.171.56:43015
2015/12/21 10:47:50 Notify remote for shaking 109 [172.17.42.1:56551 10.1.1.98:56551 116.30.171.74:56551]
2015/12/21 10:47:50 shakeOne To 192.168.1.23:43015
2015/12/21 10:47:50 shakeOne To 172.17.42.1:43015
2015/12/21 10:47:50 shakeOne To 183.16.171.56:43015
2015/12/21 10:47:50 shakeOne To 192.168.1.23:43015
2015/12/21 10:47:50 shakeOne To 172.17.42.1:43015
2015/12/21 10:47:50 shakeOne To 183.16.171.56:43015
2015/12/21 10:47:50 shakeOne To 192.168.1.23:43015
2015/12/21 10:47:50 shakeOne To 172.17.42.1:43015
2015/12/21 10:47:50 shakeOne To 183.16.171.56:43015
2015/12/21 10:47:50 Response notify remote for shake 109
2015/12/21 10:47:55 shakeOne To 192.168.1.23:43015
2015/12/21 10:47:55 shakeOne To 172.17.42.1:43015
2015/12/21 10:47:55 shakeOne To 183.16.171.56:43015
2015/12/21 10:47:55 shakeOne To 192.168.1.23:43015
2015/12/21 10:47:55 shakeOne To 172.17.42.1:43015
2015/12/21 10:47:55 shakeOne To 183.16.171.56:43015
2015/12/21 10:47:55 shakeOne To 192.168.1.23:43015
2015/12/21 10:47:55 shakeOne To 172.17.42.1:43015
2015/12/21 10:47:55 shakeOne To 183.16.171.56:43015
2015/12/21 10:48:00 shakeOne To 192.168.1.23:43015
2015/12/21 10:48:00 shakeOne To 172.17.42.1:43015
2015/12/21 10:48:00 shakeOne To 183.16.171.56:43015
2015/12/21 10:48:00 shakeOne To 192.168.1.23:43015
2015/12/21 10:48:00 shakeOne To 172.17.42.1:43015
2015/12/21 10:48:00 shakeOne To 183.16.171.56:43015
2015/12/21 10:48:00 shakeOne To 192.168.1.23:43015
2015/12/21 10:48:00 shakeOne To 172.17.42.1:43015
2015/12/21 10:48:00 shakeOne To 183.16.171.56:43015
2015/12/21 10:48:05 tcpReadLoop error:  message: readMessageError
2015/12/21 10:48:05 waiting for 5s for reconnect

[janson@localhost koolnet]$ ./ctest -listen="192.168.1.1:80;0.0.0.0:8890" -user="janson" -password="janson"
2015/12/21 10:58:16 Got clientId: 0 IP 183.16.171.56
2015/12/21 10:58:16 starting
2015/12/21 10:58:20 create new p2pclient, from= 109 remoteaddrs [172.17.42.1:56551 10.1.1.98:56551 116.30.171.74:56551]
2015/12/21 10:58:20 init pong 183.16.171.56:43015
2015/12/21 10:58:20 resetLocalAddrs: [192.168.1.23:43015 172.17.42.1:43015 183.16.171.56:43015]
2015/12/21 10:58:20 resetLocalAddrs: [192.168.1.23:43015 172.17.42.1:43015 183.16.171.56:43015]
2015/12/21 10:58:20 got from themself [192.168.1.23:43015 172.17.42.1:43015 183.16.171.56:43015] [172.17.42.1:56551 10.1.1.98:56551 116.30.171.74:56551]
2015/12/21 10:58:20 shakeOne To 172.17.42.1:56551
2015/12/21 10:58:20 shakeOne To 10.1.1.98:56551
2015/12/21 10:58:20 shakeOne To 116.30.171.74:56551
2015/12/21 10:58:20 shakeOne To 172.17.42.1:56551
2015/12/21 10:58:20 shakeOne To 10.1.1.98:56551
2015/12/21 10:58:20 shakeOne To 116.30.171.74:56551
2015/12/21 10:58:20 shakeOne To 172.17.42.1:56551
2015/12/21 10:58:20 shakeOne To 10.1.1.98:56551
2015/12/21 10:58:20 shakeOne To 116.30.171.74:56551
2015/12/21 10:58:20 Response notify remote for shake 0
2015/12/21 10:58:25 shakeOne To 172.17.42.1:56551
2015/12/21 10:58:25 shakeOne To 10.1.1.98:56551
2015/12/21 10:58:25 shakeOne To 116.30.171.74:56551
2015/12/21 10:58:25 shakeOne To 172.17.42.1:56551
2015/12/21 10:58:25 shakeOne To 10.1.1.98:56551
2015/12/21 10:58:25 shakeOne To 116.30.171.74:56551
2015/12/21 10:58:25 shakeOne To 172.17.42.1:56551
2015/12/21 10:58:25 shakeOne To 10.1.1.98:56551
2015/12/21 10:58:25 shakeOne To 116.30.171.74:56551
2015/12/21 10:58:30 shakeOne To 172.17.42.1:56551
2015/12/21 10:58:30 shakeOne To 10.1.1.98:56551
2015/12/21 10:58:30 shakeOne To 116.30.171.74:56551
2015/12/21 10:58:30 shakeOne To 172.17.42.1:56551
2015/12/21 10:58:30 shakeOne To 10.1.1.98:56551
2015/12/21 10:58:30 shakeOne To 116.30.171.74:56551
2015/12/21 10:58:30 shakeOne To 172.17.42.1:56551
2015/12/21 10:58:30 shakeOne To 10.1.1.98:56551
2015/12/21 10:58:30 shakeOne To 116.30.171.74:56551


root@OpenWrt:~# tcpdump -i pppoe-wan udp
tcpdump: verbose output suppressed, use -v or -vv for full protocol decode
listening on pppoe-wan, link-type LINUX_SLL (Linux cooked), capture size 65535 bytes
10:58:09.414951 IP 183.16.171.56.35282 > 58.220.12.40.8000: UDP, length 53
10:58:09.442890 IP 58.220.12.40.8000 > 183.16.171.56.35282: UDP, length 37
10:58:09.443318 IP 183.16.171.56.51821 > public1.alidns.com.domain: 15047+ PTR? 56.171.16.183.in-addr.arpa. (44)
10:58:12.372440 IP public1.alidns.com.domain > 183.16.171.56.51821: 15047 NXDomain 0/1/0 (133)
10:58:12.372958 IP 183.16.171.56.28193 > public1.alidns.com.domain: 51347+ PTR? 40.12.220.58.in-addr.arpa. (43)
10:58:12.381098 IP public1.alidns.com.domain > 183.16.171.56.28193: 51347 NXDomain 0/1/0 (99)
10:58:12.381614 IP 183.16.171.56.18250 > public1.alidns.com.domain: 2490+ PTR? 5.5.5.223.in-addr.arpa. (40)
10:58:12.389017 IP public1.alidns.com.domain > 183.16.171.56.18250: 2490 1/0/0 PTR public1.alidns.com. (72)
10:58:16.193863 IP 183.16.171.56.63878 > public1.alidns.com.domain: 14415+ A? ngrok.wang. (28)
10:58:16.202117 IP public1.alidns.com.domain > 183.16.171.56.63878: 14415 1/0/0 A 115.28.237.155 (44)
10:58:20.117091 IP 183.16.171.56.43015 > 115.28.237.155.18886: UDP, length 54
10:58:20.163401 IP 115.28.237.155.18886 > 183.16.171.56.43015: UDP, length 73
10:58:20.224847 IP 116.30.171.74.56551 > 183.16.171.56.43015: UDP, length 64
10:58:20.235389 IP 116.30.171.74.56551 > 183.16.171.56.43015: UDP, length 64
10:58:20.245837 IP 116.30.171.74.56551 > 183.16.171.56.43015: UDP, length 64
10:58:20.300707 IP 183.16.171.56.43015 > 10.1.1.98.56551: UDP, length 60
10:58:20.300739 IP 183.16.171.56.1024 > 116.30.171.74.56551: UDP, length 64
10:58:20.310876 IP 183.16.171.56.43015 > 10.1.1.98.56551: UDP, length 60
10:58:20.310893 IP 183.16.171.56.1024 > 116.30.171.74.56551: UDP, length 64
10:58:20.321129 IP 183.16.171.56.43015 > 10.1.1.98.56551: UDP, length 60
10:58:20.321152 IP 183.16.171.56.1024 > 116.30.171.74.56551: UDP, length 64
10:58:20.389079 IP 116.30.171.74.56551 > 183.16.171.56.43015: UDP, length 64
10:58:20.399304 IP 116.30.171.74.56551 > 183.16.171.56.43015: UDP, length 64
10:58:20.408361 IP 116.30.171.74.56551 > 183.16.171.56.43015: UDP, length 64
10:58:21.118419 IP 183.16.171.56.29520 > public1.alidns.com.domain: 374+ PTR? 155.237.28.115.in-addr.arpa. (45)
10:58:21.625795 IP public1.alidns.com.domain > 183.16.171.56.29520: 374 NXDomain 0/0/0 (45)
10:58:21.626252 IP 183.16.171.56.7835 > public1.alidns.com.domain: 51637+ PTR? 74.171.30.116.in-addr.arpa. (44)
10:58:23.825439 IP public1.alidns.com.domain > 183.16.171.56.7835: 51637 NXDomain 0/1/0 (104)
10:58:25.022107 IP 116.30.171.74.56551 > 183.16.171.56.43015: UDP, length 64
10:58:25.032315 IP 116.30.171.74.56551 > 183.16.171.56.43015: UDP, length 64
10:58:25.042464 IP 116.30.171.74.56551 > 183.16.171.56.43015: UDP, length 64
10:58:25.117060 IP 183.16.171.56.43015 > 10.1.1.98.56551: UDP, length 60
10:58:25.117078 IP 183.16.171.56.1024 > 116.30.171.74.56551: UDP, length 64
10:58:25.127345 IP 183.16.171.56.43015 > 10.1.1.98.56551: UDP, length 60
10:58:25.127358 IP 183.16.171.56.1024 > 116.30.171.74.56551: UDP, length 64
10:58:25.137570 IP 183.16.171.56.43015 > 10.1.1.98.56551: UDP, length 60
10:58:25.137583 IP 183.16.171.56.1024 > 116.30.171.74.56551: UDP, length 64
10:58:25.626490 IP 183.16.171.56.11803 > public1.alidns.com.domain: 33175+ A? nat.emule.org.cn. (34)
10:58:25.634924 IP public1.alidns.com.domain > 183.16.171.56.11803: 33175 0/1/0 (111)
10:58:30.024480 IP 116.30.171.74.56551 > 183.16.171.56.43015: UDP, length 64
10:58:30.032242 IP 116.30.171.74.56551 > 183.16.171.56.43015: UDP, length 64
10:58:30.043231 IP 116.30.171.74.56551 > 183.16.171.56.43015: UDP, length 64
10:58:30.117027 IP 183.16.171.56.43015 > 10.1.1.98.56551: UDP, length 60
10:58:30.117045 IP 183.16.171.56.1024 > 116.30.171.74.56551: UDP, length 64
10:58:30.127294 IP 183.16.171.56.43015 > 10.1.1.98.56551: UDP, length 60
10:58:30.127309 IP 183.16.171.56.1024 > 116.30.171.74.56551: UDP, length 64
10:58:30.137543 IP 183.16.171.56.43015 > 10.1.1.98.56551: UDP, length 60
10:58:30.137557 IP 183.16.171.56.1024 > 116.30.171.74.56551: UDP, length 64
^C
48 packets captured
48 packets received by filter
0 packets dropped by kernel
root@OpenWrt:~# 
root@OpenWrt:~# 
