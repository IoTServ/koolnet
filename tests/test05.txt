root@OpenWrt:~# 
root@OpenWrt:~# 
root@OpenWrt:~# tcpdump -i pppoe-wan udp
tcpdump: verbose output suppressed, use -v or -vv for full protocol decode
listening on pppoe-wan, link-type LINUX_SLL (Linux cooked), capture size 65535 bytes
22:50:31.737524 IP 183.60.56.40.8000 > 183.16.171.56.52204: UDP, length 263
22:50:31.738669 IP 183.16.171.56.52204 > 183.60.56.40.8000: UDP, length 55
22:50:32.086757 IP 183.60.56.40.8000 > 183.16.171.56.52204: UDP, length 79
22:50:32.404942 IP 183.16.171.56.65364 > public1.alidns.com.domain: 49036+ PTR? 56.171.16.183.in-addr.arpa. (44)
22:50:33.388332 IP 183.16.171.56.52204 > 183.60.56.40.8000: UDP, length 71
22:50:33.395824 IP 183.60.56.40.8000 > 183.16.171.56.52204: UDP, length 47
22:50:33.768286 IP public1.alidns.com.domain > 183.16.171.56.65364: 49036 NXDomain 0/1/0 (133)
22:50:35.812801 IP 183.60.56.40.8000 > 183.16.171.56.52204: UDP, length 79
22:50:36.032233 IP 183.60.56.40.8000 > 183.16.171.56.52204: UDP, length 79
22:50:37.205954 IP 183.16.171.56.52204 > 183.60.56.40.8000: UDP, length 167
22:50:37.218318 IP 183.60.56.40.8000 > 183.16.171.56.52204: UDP, length 31
22:50:37.892101 IP 183.60.56.40.8000 > 183.16.171.56.52204: UDP, length 247
22:50:37.893696 IP 183.16.171.56.52204 > 183.60.56.40.8000: UDP, length 55
22:50:39.331562 IP 183.16.171.56.35282 > 58.220.12.40.8000: UDP, length 56
22:50:39.331808 IP 183.16.171.56.46075 > 114.80.189.3.8000: UDP, length 50
22:50:39.359311 IP 58.220.12.40.8000 > 183.16.171.56.35282: UDP, length 34
22:50:39.361315 IP 114.80.189.3.8000 > 183.16.171.56.46075: UDP, length 55
22:50:39.775947 IP 183.16.171.56.51673 > public1.alidns.com.domain: 10670+ PTR? 3.189.80.114.in-addr.arpa. (43)
22:50:39.784499 IP public1.alidns.com.domain > 183.16.171.56.51673: 10670 ServFail 0/0/0 (43)
22:50:40.825273 IP 183.16.171.56.44118 > 183.60.209.36.80: UDP, length 172
22:50:40.831253 IP 183.60.209.36.80 > 183.16.171.56.44118: UDP, length 28
22:50:42.994802 IP 183.60.56.40.8000 > 183.16.171.56.52204: UDP, length 239
22:50:42.996389 IP 183.16.171.56.52204 > 183.60.56.40.8000: UDP, length 55
22:50:44.837975 IP 183.60.56.40.8000 > 183.16.171.56.52204: UDP, length 79
22:50:45.389898 IP 183.16.171.56.52204 > 183.60.56.40.8000: UDP, length 751
22:50:45.392689 IP 183.16.171.56.52204 > 183.60.56.40.8000: UDP, length 767
22:50:45.394713 IP 183.16.171.56.52204 > 183.60.56.40.8000: UDP, length 751
22:50:45.396817 IP 183.16.171.56.52204 > 183.60.56.40.8000: UDP, length 727
22:50:45.397267 IP 183.16.171.56.52204 > 183.60.56.40.8000: UDP, length 135
22:50:45.401124 IP 183.60.56.40.8000 > 183.16.171.56.52204: UDP, length 583
22:50:45.402798 IP 183.60.56.40.8000 > 183.16.171.56.52204: UDP, length 527
22:50:45.406040 IP 183.60.56.40.8000 > 183.16.171.56.52204: UDP, length 543
22:50:45.406149 IP 183.60.56.40.8000 > 183.16.171.56.52204: UDP, length 207
22:50:45.408604 IP 183.60.56.40.8000 > 183.16.171.56.52204: UDP, length 551
22:50:45.408983 IP 183.16.171.56.52204 > 183.60.56.40.8000: UDP, length 407
22:50:45.411501 IP 183.16.171.56.52204 > 183.60.56.40.8000: UDP, length 415
22:50:45.413370 IP 183.16.171.56.52204 > 183.60.56.40.8000: UDP, length 375
22:50:45.417218 IP 183.16.171.56.52204 > 183.60.56.40.8000: UDP, length 415
22:50:45.418507 IP 183.60.56.40.8000 > 183.16.171.56.52204: UDP, length 527
22:50:45.420479 IP 183.16.171.56.52204 > 183.60.56.40.8000: UDP, length 71
22:50:45.423698 IP 183.60.56.40.8000 > 183.16.171.56.52204: UDP, length 543
22:50:45.425227 IP 183.60.56.40.8000 > 183.16.171.56.52204: UDP, length 503
22:50:45.425385 IP 183.60.56.40.8000 > 183.16.171.56.52204: UDP, length 71
22:50:45.425911 IP 183.16.171.56.52204 > 183.60.56.40.8000: UDP, length 87
22:50:45.430155 IP 183.60.56.40.8000 > 183.16.171.56.52204: UDP, length 543
22:50:45.435395 IP 183.16.171.56.52204 > 183.60.56.40.8000: UDP, length 95
22:50:45.442249 IP 183.60.56.40.8000 > 183.16.171.56.52204: UDP, length 119
22:50:45.442683 IP 183.60.56.40.8000 > 183.16.171.56.52204: UDP, length 119
22:50:47.809846 IP 183.60.56.40.8000 > 183.16.171.56.52204: UDP, length 79
22:50:48.579853 IP 183.60.56.40.8000 > 183.16.171.56.52204: UDP, length 79
22:50:48.692095 IP 183.60.56.40.8000 > 183.16.171.56.52204: UDP, length 79
22:50:48.926286 IP 171.223.241.187.59935 > 183.16.171.56.52345: UDP, length 64
22:50:48.936266 IP 171.223.241.187.59935 > 183.16.171.56.52345: UDP, length 64
22:50:48.949793 IP 171.223.241.187.59935 > 183.16.171.56.52345: UDP, length 64
22:50:48.989969 IP 183.16.171.56.52345 > 192.168.249.1.59935: UDP, length 64
22:50:48.990173 IP 183.16.171.56.52345 > 192.168.100.108.59935: UDP, length 66
22:50:48.990183 IP 183.16.171.56.52345 > 192.168.198.1.59935: UDP, length 64
22:50:48.990282 IP 183.16.171.56.1024 > 171.223.241.187.59935: UDP, length 66
22:50:48.999957 IP 183.16.171.56.52345 > 192.168.249.1.59935: UDP, length 64
22:50:49.000102 IP 183.16.171.56.52345 > 192.168.100.108.59935: UDP, length 66
22:50:49.000109 IP 183.16.171.56.52345 > 192.168.198.1.59935: UDP, length 64
22:50:49.000124 IP 183.16.171.56.1024 > 171.223.241.187.59935: UDP, length 66
22:50:49.010056 IP 183.16.171.56.52345 > 192.168.249.1.59935: UDP, length 64
22:50:49.010160 IP 183.16.171.56.52345 > 192.168.100.108.59935: UDP, length 66
22:50:49.010168 IP 183.16.171.56.52345 > 192.168.198.1.59935: UDP, length 64
22:50:49.010173 IP 183.16.171.56.1024 > 171.223.241.187.59935: UDP, length 66
22:50:49.101651 IP 171.223.241.187.59935 > 183.16.171.56.52345: UDP, length 64
22:50:49.114028 IP 171.223.241.187.59935 > 183.16.171.56.52345: UDP, length 64
22:50:49.126827 IP 171.223.241.187.59935 > 183.16.171.56.52345: UDP, length 64
22:50:51.405585 IP 183.60.56.40.8000 > 183.16.171.56.52204: UDP, length 247
22:50:51.407204 IP 183.16.171.56.52204 > 183.60.56.40.8000: UDP, length 55
22:50:52.748532 IP 183.16.171.56.52204 > 183.60.56.40.8000: UDP, length 39
22:50:52.810930 IP 183.60.56.40.8000 > 183.16.171.56.52204: UDP, length 47
22:50:53.803073 IP 171.223.241.187.59935 > 183.16.171.56.52345: UDP, length 64
22:50:53.814788 IP 171.223.241.187.59935 > 183.16.171.56.52345: UDP, length 64
22:50:53.829417 IP 171.223.241.187.59935 > 183.16.171.56.52345: UDP, length 64
22:50:53.836209 IP 183.16.171.56.52345 > 192.168.249.1.59935: UDP, length 64
22:50:53.836218 IP 183.16.171.56.52345 > 192.168.198.1.59935: UDP, length 64
22:50:53.836354 IP 183.16.171.56.52345 > 192.168.100.108.59935: UDP, length 66
22:50:53.836361 IP 183.16.171.56.1024 > 171.223.241.187.59935: UDP, length 66
22:50:53.846682 IP 183.16.171.56.52345 > 192.168.249.1.59935: UDP, length 64
22:50:53.846688 IP 183.16.171.56.52345 > 192.168.198.1.59935: UDP, length 64
22:50:53.846791 IP 183.16.171.56.52345 > 192.168.100.108.59935: UDP, length 66
22:50:53.846797 IP 183.16.171.56.1024 > 171.223.241.187.59935: UDP, length 66
22:50:53.857003 IP 183.16.171.56.52345 > 192.168.249.1.59935: UDP, length 64
22:50:53.857009 IP 183.16.171.56.52345 > 192.168.198.1.59935: UDP, length 64
22:50:53.857019 IP 183.16.171.56.52345 > 192.168.100.108.59935: UDP, length 66
22:50:53.857126 IP 183.16.171.56.1024 > 171.223.241.187.59935: UDP, length 66
22:50:59.250909 IP 183.60.56.40.8000 > 183.16.171.56.52204: UDP, length 231
22:50:59.252466 IP 183.16.171.56.52204 > 183.60.56.40.8000: UDP, length 55


[janson@localhost koolnet]$ ./ctest -user="janson" -password="janson"
2015/12/20 22:22:18 Got clientId: 136 IP 183.16.171.56
2015/12/20 22:22:18 starting
panic: runtime error: invalid memory address or nil pointer dereference
[signal 0xb code=0x1 addr=0x0 pc=0x50462e]

goroutine 39 [running]:
net.(*UDPConn).WriteToUDP(0x0, 0xc8200d6c00, 0xc, 0x400, 0xc820152390, 0x0, 0x0, 0x0)
	/home/janson/go1.5.1/src/net/udpsock_posix.go:117 +0x9fe
_/home/janson/workspace-go/src/github.com/jannson/koolnet/src/common.WriteUdpMsgServer(0xc82011de40, 0xc820152390, 0x0, 0x0, 0x0)
	/home/janson/workspace-go/src/github.com/jannson/koolnet/src/common/pack.go:150 +0x251
_/home/janson/workspace-go/src/github.com/jannson/koolnet/src/client.(*P2pClient).Init(0xc82017e000, 0xc8200940a0, 0x0, 0x0)
	/home/janson/workspace-go/src/github.com/jannson/koolnet/src/client/p2pclient.go:163 +0x6b1
_/home/janson/workspace-go/src/github.com/jannson/koolnet/src/client.(*P2pClient).RunC(0xc82017e000, 0xc8200940a0, 0x0, 0x0)
	/home/janson/workspace-go/src/github.com/jannson/koolnet/src/client/p2pclient.go:245 +0xc5
_/home/janson/workspace-go/src/github.com/jannson/koolnet/src/client.(*Client).requestP2p.func1(0x0, 0x0)
	/home/janson/workspace-go/src/github.com/jannson/koolnet/src/client/client.go:597 +0x35
github.com/icholy/killable.Go.func1(0x7f4f319650a8, 0xc82017e000, 0xc820150120)
	/home/janson/workspace-go/src/github.com/icholy/killable/killable.go:110 +0x58
created by github.com/icholy/killable.Go
	/home/janson/workspace-go/src/github.com/icholy/killable/killable.go:113 +0x84
